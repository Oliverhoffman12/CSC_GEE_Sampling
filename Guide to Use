Guide to Using ESRI and Google Earth Engine for Sampling Scheme
Oliver Hoffman 
4/2/2024
Setting up Google Earth Engine-
	Make sure you have a google account and sign in on google earth engine (GEE) code editor (code.earthengine.google.com). Once in GEE create a new file and name it what you like. All done here for now. 
Pulling Down High-Resolution Slope Data from ArcGIS Pro- 
	Open ArcGIS Pro, make a new project or use an existing one. Click on catalog tab on bottom left tabs. Click portal (next to project, below catalog name at top) then click on the far right cloud (living atlas) below portal. In the search bar paste in “Slope Map” and we want to use the “Terrain: Slope Map” which should be at the top. Right click and select add to current map (this dataset is huge so it may take a while to draw down). Add or create the polygon for the field you want to use. At this step, in the contents pane to the far right you should have the Terrain: Slope Map from ESRI, and the polygons for the fields you want to apply this sampling scheme to. Now we only want the slope for the specific field(s), so move to the bottom right and click on the geoprocessing tab and search “Clip Raster”. The “Input Raster” is the slope map, the “Output Extent” is the field polygon, then make sure the box is checked for “Use Input Features for Clipping Geometry” and unchecked for “Maintain Clipping Geometry”, then run the tool (this also may take a while). Now we have a new layer that is the slope for only our field(s) of interest. We want to export this layer so move to contents pane on far right and right clip the layer for the clipped slope raster, select data, then select export raster. In the “Output Raster Dataset” choose where you want the data saved, change “Output Format” to TIFF, and leave everything else and default, then export. All done in ArcGIS for now.
Importing Slope Data to Google Earth Engine-
	Move back over to GEE and on the top left select the assets tab. Click on new, image upload, GeoTIFF, select source file, navigate to where you stored the TIFF file, select that file and name it something short and easy, then upload. That TIFF file uploaded should now pop up in your legacy assets. 
Setting up Google Earth Engine Script-
	Move back over the file you created, located in the scripts tab. Copy and paste in the code from GitHub. Now we need to draw the polygon(s) for the field(s) we want to run this code on. In the map section on the bottom, click the draw shape icon in the top left (in the row it is the second from the right). This now created a geometry (which is what it will automatically name that polygon), now navigate to where the field you are interested in is located and outline the field, then hover over the tab that says geometry, click on the settings button, and rename the polygon (this part is important). At this point you should have the slope TIFF in your legacy assets, a polygon outlined and named, along with the script pasted in. From here you can alter the number of clusters and points at the top of the code. Just below where it asks for the name of your polygon, type out the name of your field (the exact same as what you renamed the geometry polygon) and make sure to leave the semicolon. Now below that code section is where you will bring in the slope data. The format in the parenthesis should look like: ('projects/earthengine-legacy/assets/users/yourgmail(without @gmail.com)/the name of your slope file'). This part is critical to bringing in the slope data, but you should get an error if this is not properly formatted. If you want to alter the date ranges for the sentinel-2 data (NDVI and NDWI) you can do that below where you bring in the slope, I have it set as default for the growing seasons of 19, 20, 21, 22, and 23. 
Running and Interpreting Code- 
	Once all the previous steps are complete, run the code. The output will show up on the map with the clusters and points. However, you can also view each layer if you hover over the layers tab at the top of the map and check the other data boxes. This code also outputs some statistics in the console. 
Exporting Data-
	If you want to export the data to ArcGIS Pro or another mapping software, you can select the Tasks tab to the right of Console. Each layer is ready to export but needs to be run. If you click run, name your file, and specify the output location, you can export the GeoTIFF or .SHP file to your google drive. From here you can access the file in google drive, download the file to your computer, save in specific spot, and upload to ArcGIS Pro. 
